\doxysection{scope\+\_\+exit.\+hh}
\hypertarget{scope__exit_8hh_source}{}\label{scope__exit_8hh_source}\index{include/kiwi/common/scope\_exit.hh@{include/kiwi/common/scope\_exit.hh}}
\mbox{\hyperlink{scope__exit_8hh}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//===-\/\ llvm/ADT/ScopeExit.h\ -\/\ Execute\ code\ at\ scope\ exit\ -\/-\/-\/-\/-\/-\/-\/-\/*-\/\ C++\ -\/*-\/===//}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Part\ of\ the\ LLVM\ Project,\ under\ the\ Apache\ License\ v2.0\ with\ LLVM\ Exceptions.}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ See\ https://llvm.org/LICENSE.txt\ for\ license\ information.}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ Apache-\/2.0\ WITH\ LLVM-\/exception}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00007\ \textcolor{comment}{//===-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/===//}}
\DoxyCodeLine{00013\ \textcolor{comment}{//===-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/===//}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacekiwi}{kiwi}}\ \{}
\DoxyCodeLine{00021\ \textcolor{keyword}{namespace\ }detail\ \{}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Callable>}
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }scope\_exit\ \{}
\DoxyCodeLine{00025\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00026\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fp>}
\DoxyCodeLine{00027\ \ \ \textcolor{keyword}{explicit}\ scope\_exit(Fp\&\&\ fp)\ :\ exit\_function\_(std::forward<Fp>(fp))\ \{\}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ scope\_exit(scope\_exit\&\&\ rhs)}
\DoxyCodeLine{00030\ \ \ \ \ \ \ :\ exit\_function\_(std::move(rhs.exit\_function\_)),\ engaged\_(rhs.engaged\_)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ rhs.Dismiss();}
\DoxyCodeLine{00032\ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ scope\_exit(\textcolor{keyword}{const}\ scope\_exit\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00035\ \ \ scope\_exit\&\ operator=(scope\_exit\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00036\ \ \ scope\_exit\&\ operator=(\textcolor{keyword}{const}\ scope\_exit\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \textcolor{keywordtype}{void}\ Dismiss()\ \{\ engaged\_\ =\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \string~scope\_exit()\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordflow}{if}\ (engaged\_)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ exit\_function\_();}
\DoxyCodeLine{00043\ \ \ \ \ \}}
\DoxyCodeLine{00044\ \ \ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00047\ \ \ Callable\ exit\_function\_;}
\DoxyCodeLine{00048\ \ \ \textcolor{keywordtype}{bool}\ engaged\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00049\ \};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \}\ \ \textcolor{comment}{//\ end\ namespace\ detail}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Callable>}
\DoxyCodeLine{00059\ [[nodiscard]]\ \mbox{\hyperlink{classkiwi_1_1detail_1_1scope__exit}{detail::scope\_exit<std::decay\_t<Callable>}}>\ \mbox{\hyperlink{namespacekiwi_a851bea1bb4a936e7446e8fc1ab579231}{make\_scope\_exit}}(}
\DoxyCodeLine{00060\ \ \ \ \ Callable\&\&\ fp)\ \{}
\DoxyCodeLine{00061\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classkiwi_1_1detail_1_1scope__exit}{detail::scope\_exit<std::decay\_t<Callable>}}>(std::forward<Callable>(fp));}
\DoxyCodeLine{00062\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \}\ \ \textcolor{comment}{//\ namespace\ kiwi}}

\end{DoxyCode}
