\doxysection{function.\+hh}
\hypertarget{function_8hh_source}{}\label{function_8hh_source}\index{include/kiwi/common/function.hh@{include/kiwi/common/function.hh}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ Copyright\ (c)\ Meta\ Platforms,\ Inc.\ and\ affiliates.}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{comment}{//}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ Docs:\ https://fburl.com/fbcref\_function}}
\DoxyCodeLine{00019\ \textcolor{comment}{//}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \textcolor{preprocessor}{\#include\ <cstring>}}
\DoxyCodeLine{00204\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00205\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00206\ \textcolor{preprocessor}{\#include\ <new>}}
\DoxyCodeLine{00207\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00208\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \textcolor{preprocessor}{\#include\ "{}kiwi/common/align.hh"{}}}
\DoxyCodeLine{00211\ \textcolor{preprocessor}{\#include\ "{}kiwi/common/exception.hh"{}}}
\DoxyCodeLine{00212\ \textcolor{preprocessor}{\#include\ "{}kiwi/common/utility.hh"{}}}
\DoxyCodeLine{00213\ \textcolor{preprocessor}{\#include\ "{}kiwi/portability/attributes.hh"{}}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacekiwi}{kiwi}}\ \{}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FunctionType>}
\DoxyCodeLine{00218\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classfolly_1_1_function}{Function}};}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00221\ \mbox{\hyperlink{classfolly_1_1_function}{Function}}<ReturnType(Args...)\ \textcolor{keyword}{const}>\ \mbox{\hyperlink{namespacekiwi_a60a5cfa5df6cc93c3804817084f57052}{const\_cast\_function}}(}
\DoxyCodeLine{00222\ \ \ \ \ \mbox{\hyperlink{classfolly_1_1_function}{Function}}<ReturnType(Args...)>\&\&)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00225\ \mbox{\hyperlink{classfolly_1_1_function}{Function}}<ReturnType(Args...)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}>\ \mbox{\hyperlink{namespacekiwi_a60a5cfa5df6cc93c3804817084f57052}{const\_cast\_function}}(}
\DoxyCodeLine{00226\ \ \ \ \ \mbox{\hyperlink{classfolly_1_1_function}{Function}}<ReturnType(Args...)\ \textcolor{keyword}{noexcept}>\&\&)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \textcolor{keyword}{namespace\ }detail\ \{}
\DoxyCodeLine{00229\ \textcolor{keyword}{namespace\ }function\ \{}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \textcolor{keyword}{enum\ class}\ Op\ \{\ kMove,\ kNuke,\ kHeap\ \};}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \textcolor{keyword}{union\ }\mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\ \{}
\DoxyCodeLine{00234\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_data_1_1_big_trivial_layout}{BigTrivialLayout}}\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordtype}{void}*\ big;}
\DoxyCodeLine{00236\ \ \ \ \ std::size\_t\ size;}
\DoxyCodeLine{00237\ \ \ \ \ std::size\_t\ align;}
\DoxyCodeLine{00238\ \ \ \};}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \textcolor{keywordtype}{void}*\ big;}
\DoxyCodeLine{00241\ \ \ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_data_1_1_big_trivial_layout}{BigTrivialLayout}}\ bigt;}
\DoxyCodeLine{00242\ \ \ std::aligned\_storage<6\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void}*)>::type\ tiny;}
\DoxyCodeLine{00243\ \};}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_coerce_tag}{CoerceTag}}\ \{\};}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00248\ \textcolor{keyword}{using\ }FunctionNullptrTest\ =}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keyword}{decltype}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{bool}\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}T\ const\&\textcolor{keyword}{>}(T(\textcolor{keyword}{nullptr}))\ ==\ \textcolor{keyword}{nullptr}));}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00252\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ IsNullptrCompatible\ =\ is\_detected\_v<FunctionNullptrTest,\ T>;}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::enable\_if\_t<!IsNullptrCompatible<T>,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00255\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ isEmptyFunction(T\ \textcolor{keyword}{const}\&)\ \{}
\DoxyCodeLine{00256\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00257\ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ std::enable\_if\_t<IsNullptrCompatible<T>,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00260\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ isEmptyFunction(T\ \textcolor{keyword}{const}\&\ t)\ \{}
\DoxyCodeLine{00261\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{bool}\textcolor{keyword}{>}(t\ ==\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00262\ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00265\ \textcolor{keyword}{using\ }CallableResult\ =\ \textcolor{keyword}{decltype}(KIWI\_DECLVAL(F\&\&)(KIWI\_DECLVAL(Args\&\&)...));}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00268\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ CallableNoexcept\ =}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keyword}{noexcept}(KIWI\_DECLVAL(F\&\&)(KIWI\_DECLVAL(Args\&\&)...));}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ From,\ \textcolor{keyword}{typename}\ To,}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ =}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ std::enable\_if<!std::is\_reference<To>::value\ ||}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::is\_reference<From>::value>::type>}
\DoxyCodeLine{00275\ \textcolor{keyword}{using\ }IfSafeResultImpl\ =\ \textcolor{keyword}{decltype}(void(\textcolor{keyword}{static\_cast<}To\textcolor{keyword}{>}(KIWI\_DECLVAL(From))));}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)}}
\DoxyCodeLine{00278\ \textcolor{comment}{//\ \ Need\ a\ workaround\ for\ MSVC\ to\ avoid\ the\ inscrutable\ error:}}
\DoxyCodeLine{00279\ \textcolor{comment}{//}}
\DoxyCodeLine{00280\ \textcolor{comment}{//\ \ \ \ \ \ folly\(\backslash\)function.h(...)\ :\ fatal\ error\ C1001:\ An\ internal\ error\ has}}
\DoxyCodeLine{00281\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ occurred\ in\ the\ compiler.}}
\DoxyCodeLine{00282\ \textcolor{comment}{//\ \ \ \ \ \ (compiler\ file\ 'f:\(\backslash\)dd\(\backslash\)vctools\(\backslash\)compiler\(\backslash\)utc\(\backslash\)src\(\backslash\)p2\(\backslash\)main.c',\ line\ 258)}}
\DoxyCodeLine{00283\ \textcolor{comment}{//\ \ \ \ \ \ To\ work\ around\ this\ problem,\ try\ simplifying\ or\ changing\ the\ program}}
\DoxyCodeLine{00284\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ near\ the\ locations\ listed\ above.}}
\DoxyCodeLine{00285\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00286\ \textcolor{keyword}{using\ }CallArg\ =\ T\&\&;}
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00288\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00289\ \textcolor{keyword}{using\ }CallArg\ =\ conditional\_t<is\_register\_pass\_v<T>,\ T,\ T\&\&>;}
\DoxyCodeLine{00290\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keywordtype}{bool}\ Nx,\ \textcolor{keyword}{typename}\ R,\ \textcolor{keyword}{typename}...\ A>}
\DoxyCodeLine{00293\ \textcolor{keyword}{class\ }FunctionTraitsSharedProxy\ \{}
\DoxyCodeLine{00294\ \ \ std::shared\_ptr<Function<F>>\ sp\_;}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00297\ \ \ \textcolor{keyword}{explicit}\ FunctionTraitsSharedProxy(std::nullptr\_t)\ \textcolor{keyword}{noexcept}\ \{\}}
\DoxyCodeLine{00298\ \ \ \textcolor{keyword}{explicit}\ FunctionTraitsSharedProxy(\mbox{\hyperlink{classkiwi_1_1_function}{Function<F>}}\&\&\ func)}
\DoxyCodeLine{00299\ \ \ \ \ \ \ :\ sp\_(func\ ?\ std::make\_shared<\mbox{\hyperlink{classkiwi_1_1_function}{Function<F>}}>(std::move(func))}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ std::shared\_ptr<\mbox{\hyperlink{classkiwi_1_1_function}{Function<F>}}>())\ \{\}}
\DoxyCodeLine{00301\ \ \ R\ operator()(A...\ args)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}(Nx)\ \{}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordflow}{if}\ (!sp\_)\ \{}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \mbox{\hyperlink{namespacekiwi_abe3cc88b10ffe4cc4b1796c4bf782900}{throw\_exception<std::bad\_function\_call>}}();}
\DoxyCodeLine{00304\ \ \ \ \ \}}
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{keywordflow}{return}\ (*sp\_)(\textcolor{keyword}{static\_cast<}A\&\&\textcolor{keyword}{>}(args)...);}
\DoxyCodeLine{00306\ \ \ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \textcolor{keyword}{explicit}\ \textcolor{keyword}{operator}\ bool()\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{\ \textcolor{keywordflow}{return}\ sp\_\ !=\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator==(FunctionTraitsSharedProxy\ \textcolor{keyword}{const}\&\ proxy,}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::nullptr\_t)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{return}\ proxy.sp\_\ ==\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00313\ \ \ \}}
\DoxyCodeLine{00314\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(FunctionTraitsSharedProxy\ \textcolor{keyword}{const}\&\ proxy,}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::nullptr\_t)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keywordflow}{return}\ proxy.sp\_\ !=\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00317\ \ \ \}}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator==(std::nullptr\_t,}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FunctionTraitsSharedProxy\ \textcolor{keyword}{const}\&\ proxy)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keywordflow}{return}\ proxy.sp\_\ ==\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00322\ \ \ \}}
\DoxyCodeLine{00323\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(std::nullptr\_t,}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FunctionTraitsSharedProxy\ \textcolor{keyword}{const}\&\ proxy)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keywordflow}{return}\ proxy.sp\_\ !=\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00326\ \ \ \}}
\DoxyCodeLine{00327\ \};}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,\ \textcolor{keywordtype}{bool}\ Small,\ \textcolor{keywordtype}{bool}\ Nx,\ \textcolor{keyword}{typename}\ ReturnType,}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00331\ ReturnType\ call\_(Args...\ args,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&\ p)\ \textcolor{keyword}{noexcept}(Nx)\ \{}
\DoxyCodeLine{00332\ \ \ \textcolor{keyword}{auto}\&\ fn\ =\ *\textcolor{keyword}{static\_cast<}Fun*\textcolor{keyword}{>}(Small\ ?\ \&p.tiny\ :\ p.big);}
\DoxyCodeLine{00333\ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_void<ReturnType>::value)\ \{}
\DoxyCodeLine{00334\ \ \ \ \ fn(\textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...);}
\DoxyCodeLine{00335\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordflow}{return}\ fn(\textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...);}
\DoxyCodeLine{00337\ \ \ \}}
\DoxyCodeLine{00338\ \}}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FunctionType>}
\DoxyCodeLine{00341\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_function_traits}{FunctionTraits}};}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00344\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_function_traits}{FunctionTraits}}<ReturnType(Args...)>\ \{}
\DoxyCodeLine{00345\ \ \ \textcolor{keyword}{using\ }Call\ =\ ReturnType\ (*)(CallArg<Args>...,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&);}
\DoxyCodeLine{00346\ \ \ \textcolor{keyword}{using\ }ConstSignature\ =\ ReturnType(Args...)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00347\ \ \ \textcolor{keyword}{using\ }NonConstSignature\ =\ ReturnType(Args...);}
\DoxyCodeLine{00348\ \ \ \textcolor{keyword}{using\ }OtherSignature\ =\ ConstSignature;}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}\ R\ =\ CallableResult<F\&,\ Args...>>}
\DoxyCodeLine{00351\ \ \ \textcolor{keyword}{using\ }IfSafeResult\ =\ IfSafeResultImpl<R,\ ReturnType>;}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,\ \textcolor{keywordtype}{bool}\ Small>}
\DoxyCodeLine{00354\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ Call\ call\ =}
\DoxyCodeLine{00355\ \ \ \ \ \ \ call\_<Fun,\ Small,\ false,\ ReturnType,\ CallArg<Args>...>;}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \textcolor{keyword}{static}\ ReturnType\ uninitCall(CallArg<Args>...,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&)\ \{}
\DoxyCodeLine{00358\ \ \ \ \ \mbox{\hyperlink{namespacekiwi_abe3cc88b10ffe4cc4b1796c4bf782900}{throw\_exception<std::bad\_function\_call>}}();}
\DoxyCodeLine{00359\ \ \ \}}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ ReturnType\ operator()(Args...\ args)\ \{}
\DoxyCodeLine{00362\ \ \ \ \ \textcolor{keyword}{auto}\&\ fn\ =\ *\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classkiwi_1_1_function}{Function<NonConstSignature>}}*\textcolor{keyword}{>}(\textcolor{keyword}{this});}
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keywordflow}{return}\ fn.call\_(\textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...,\ fn.data\_);}
\DoxyCodeLine{00364\ \ \ \}}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00366\ \ \ \textcolor{keyword}{using\ }SharedProxy\ =}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \mbox{\hyperlink{classkiwi_1_1detail_1_1function_1_1_function_traits_shared_proxy}{FunctionTraitsSharedProxy}}<NonConstSignature,\ \textcolor{keyword}{false},\ ReturnType,\ Args...>;}
\DoxyCodeLine{00368\ \};}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00370\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00371\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_function_traits}{FunctionTraits}}<ReturnType(Args...)\ const>\ \{}
\DoxyCodeLine{00372\ \ \ \textcolor{keyword}{using\ }Call\ =\ ReturnType\ (*)(CallArg<Args>...,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&);}
\DoxyCodeLine{00373\ \ \ \textcolor{keyword}{using\ }ConstSignature\ =\ ReturnType(Args...)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00374\ \ \ \textcolor{keyword}{using\ }NonConstSignature\ =\ ReturnType(Args...);}
\DoxyCodeLine{00375\ \ \ \textcolor{keyword}{using\ }OtherSignature\ =\ NonConstSignature;}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}\ R\ =\ CallableResult<\textcolor{keyword}{const}\ F\&,\ Args...>>}
\DoxyCodeLine{00378\ \ \ \textcolor{keyword}{using\ }IfSafeResult\ =\ IfSafeResultImpl<R,\ ReturnType>;}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,\ \textcolor{keywordtype}{bool}\ Small>}
\DoxyCodeLine{00381\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ Call\ call\ =}
\DoxyCodeLine{00382\ \ \ \ \ \ \ call\_<const\ Fun,\ Small,\ false,\ ReturnType,\ CallArg<Args>...>;}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \textcolor{keyword}{static}\ ReturnType\ uninitCall(CallArg<Args>...,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&)\ \{}
\DoxyCodeLine{00385\ \ \ \ \ \mbox{\hyperlink{namespacekiwi_abe3cc88b10ffe4cc4b1796c4bf782900}{throw\_exception<std::bad\_function\_call>}}();}
\DoxyCodeLine{00386\ \ \ \}}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ ReturnType\ operator()(Args...\ args)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00389\ \ \ \ \ \textcolor{keyword}{auto}\&\ fn\ =\ *\textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{classkiwi_1_1_function}{Function<ConstSignature>}}*\textcolor{keyword}{>}(\textcolor{keyword}{this});}
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{keywordflow}{return}\ fn.call\_(\textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...,\ fn.data\_);}
\DoxyCodeLine{00391\ \ \ \}}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \ \ \textcolor{keyword}{using\ }SharedProxy\ =}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \mbox{\hyperlink{classkiwi_1_1detail_1_1function_1_1_function_traits_shared_proxy}{FunctionTraitsSharedProxy}}<ConstSignature,\ \textcolor{keyword}{false},\ ReturnType,\ Args...>;}
\DoxyCodeLine{00395\ \};}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00398\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_function_traits}{FunctionTraits}}<ReturnType(Args...)\ noexcept>\ \{}
\DoxyCodeLine{00399\ \ \ \textcolor{keyword}{using\ }Call\ =\ ReturnType\ (*)(CallArg<Args>...,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00400\ \ \ \textcolor{keyword}{using\ }ConstSignature\ =\ ReturnType(Args...)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00401\ \ \ \textcolor{keyword}{using\ }NonConstSignature\ =\ ReturnType(Args...)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00402\ \ \ \textcolor{keyword}{using\ }OtherSignature\ =\ ConstSignature;}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}\ R\ =\ CallableResult<F\&,\ Args...>,}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ std::enable\_if\_t<CallableNoexcept<F\&,\ Args...>,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00406\ \ \ \textcolor{keyword}{using\ }IfSafeResult\ =\ IfSafeResultImpl<R,\ ReturnType>;}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,\ \textcolor{keywordtype}{bool}\ Small>}
\DoxyCodeLine{00409\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ Call\ call\ =}
\DoxyCodeLine{00410\ \ \ \ \ \ \ call\_<Fun,\ Small,\ true,\ ReturnType,\ CallArg<Args>...>;}
\DoxyCodeLine{00411\ }
\DoxyCodeLine{00412\ \ \ \textcolor{keyword}{static}\ ReturnType\ uninitCall(CallArg<Args>...,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00413\ \ \ \ \ \mbox{\hyperlink{namespacekiwi_af132070951b2a07a01af8a189a3aed0a}{terminate\_with<std::bad\_function\_call>}}();}
\DoxyCodeLine{00414\ \ \ \}}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ ReturnType\ operator()(Args...\ args)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keyword}{auto}\&\ fn\ =\ *\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classkiwi_1_1_function}{Function<NonConstSignature>}}*\textcolor{keyword}{>}(\textcolor{keyword}{this});}
\DoxyCodeLine{00418\ \ \ \ \ \textcolor{keywordflow}{return}\ fn.call\_(\textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...,\ fn.data\_);}
\DoxyCodeLine{00419\ \ \ \}}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \textcolor{keyword}{using\ }SharedProxy\ =}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \mbox{\hyperlink{classkiwi_1_1detail_1_1function_1_1_function_traits_shared_proxy}{FunctionTraitsSharedProxy}}<NonConstSignature,\ \textcolor{keyword}{true},\ ReturnType,\ Args...>;}
\DoxyCodeLine{00423\ \};}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00426\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_function_traits}{FunctionTraits}}<ReturnType(Args...)\ const\ noexcept>\ \{}
\DoxyCodeLine{00427\ \ \ \textcolor{keyword}{using\ }Call\ =\ ReturnType\ (*)(CallArg<Args>...,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00428\ \ \ \textcolor{keyword}{using\ }ConstSignature\ =\ ReturnType(Args...)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00429\ \ \ \textcolor{keyword}{using\ }NonConstSignature\ =\ ReturnType(Args...)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00430\ \ \ \textcolor{keyword}{using\ }OtherSignature\ =\ NonConstSignature;}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}\ R\ =\ CallableResult<\textcolor{keyword}{const}\ F\&,\ Args...>,}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ std::enable\_if\_t<CallableNoexcept<\textcolor{keyword}{const}\ F\&,\ Args...>,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{00434\ \ \ \textcolor{keyword}{using\ }IfSafeResult\ =\ IfSafeResultImpl<R,\ ReturnType>;}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,\ \textcolor{keywordtype}{bool}\ Small>}
\DoxyCodeLine{00437\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ Call\ call\ =}
\DoxyCodeLine{00438\ \ \ \ \ \ \ call\_<const\ Fun,\ Small,\ true,\ ReturnType,\ CallArg<Args>...>;}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \ \ \textcolor{keyword}{static}\ ReturnType\ uninitCall(CallArg<Args>...,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00441\ \ \ \ \ \mbox{\hyperlink{namespacekiwi_af132070951b2a07a01af8a189a3aed0a}{terminate\_with<std::bad\_function\_call>}}();}
\DoxyCodeLine{00442\ \ \ \}}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \ \ ReturnType\ operator()(Args...\ args)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00445\ \ \ \ \ \textcolor{keyword}{auto}\&\ fn\ =\ *\textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{classkiwi_1_1_function}{Function<ConstSignature>}}*\textcolor{keyword}{>}(\textcolor{keyword}{this});}
\DoxyCodeLine{00446\ \ \ \ \ \textcolor{keywordflow}{return}\ fn.call\_(\textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...,\ fn.data\_);}
\DoxyCodeLine{00447\ \ \ \}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \textcolor{keyword}{using\ }SharedProxy\ =}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \mbox{\hyperlink{classkiwi_1_1detail_1_1function_1_1_function_traits_shared_proxy}{FunctionTraitsSharedProxy}}<ConstSignature,\ \textcolor{keyword}{true},\ ReturnType,\ Args...>;}
\DoxyCodeLine{00451\ \};}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \textcolor{comment}{//\ These\ are\ control\ functions.\ They\ type-\/erase\ the\ operations\ of\ move-\/}}
\DoxyCodeLine{00454\ \textcolor{comment}{//\ construction,\ destruction,\ and\ conversion\ to\ bool.}}
\DoxyCodeLine{00455\ \textcolor{comment}{//}}
\DoxyCodeLine{00456\ \textcolor{comment}{//\ The\ interface\ operations\ are\ noexcept,\ so\ the\ implementations\ are\ as\ well.}}
\DoxyCodeLine{00457\ \textcolor{comment}{//\ Having\ the\ implementations\ be\ noexcept\ in\ the\ type\ permits\ callers\ to\ omit}}
\DoxyCodeLine{00458\ \textcolor{comment}{//\ exception-\/handling\ machinery.}}
\DoxyCodeLine{00459\ \textcolor{comment}{//}}
\DoxyCodeLine{00460\ \textcolor{comment}{//\ This\ is\ intentionally\ instantiated\ per\ size\ rather\ than\ per\ function\ in\ order}}
\DoxyCodeLine{00461\ \textcolor{comment}{//\ to\ minimize\ the\ number\ of\ instantiations.\ It\ would\ be\ safe\ to\ minimize}}
\DoxyCodeLine{00462\ \textcolor{comment}{//\ instantiations\ even\ more\ by\ simply\ having\ a\ single\ non-\/template\ function\ that}}
\DoxyCodeLine{00463\ \textcolor{comment}{//\ copies\ sizeof(Data)\ bytes\ rather\ than\ only\ copying\ sizeof(Fun)\ bytes,\ but}}
\DoxyCodeLine{00464\ \textcolor{comment}{//\ then\ for\ small\ function\ types\ it\ would\ be\ likely\ to\ cross\ cache\ lines\ without}}
\DoxyCodeLine{00465\ \textcolor{comment}{//\ need.\ But\ it\ is\ only\ necessary\ to\ handle\ those\ sizes\ which\ are\ multiples\ of}}
\DoxyCodeLine{00466\ \textcolor{comment}{//\ the\ alignof(Data),\ and\ to\ round\ up\ other\ sizes.}}
\DoxyCodeLine{00467\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch_small_trivial}{DispatchSmallTrivial}}\ \{}
\DoxyCodeLine{00468\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_in\_situ\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00469\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_trivial\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \textcolor{keyword}{template}\ <std::\textcolor{keywordtype}{size\_t}\ Size>}
\DoxyCodeLine{00472\ \ \ \textcolor{keyword}{static}\ std::size\_t\ exec\_(Op\ o,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}*\ src,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}*\ dst)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{keywordflow}{switch}\ (o)\ \{}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kMove:}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ std::memcpy(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(dst),\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(src),\ Size);}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kNuke:}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kHeap:}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00481\ \ \ \ \ \}}
\DoxyCodeLine{00482\ \ \ \ \ \textcolor{keywordflow}{return}\ 0U;}
\DoxyCodeLine{00483\ \ \ \}}
\DoxyCodeLine{00484\ \ \ \textcolor{keyword}{template}\ <std::size\_t\ size,\ std::size\_t\ adjust\ =\ \textcolor{keyword}{alignof}(\mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}})\ -\/\ 1>}
\DoxyCodeLine{00485\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ std::size\_t\ size\_\ =\ (size\ +\ adjust)\ \&\ \string~adjust;}
\DoxyCodeLine{00486\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun>}
\DoxyCodeLine{00487\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ exec\ =\ exec\_<size\_<\textcolor{keyword}{sizeof}(Fun)>>;}
\DoxyCodeLine{00488\ \};}
\DoxyCodeLine{00489\ }
\DoxyCodeLine{00490\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch_big_trivial}{DispatchBigTrivial}}\ \{}
\DoxyCodeLine{00491\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_in\_situ\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00492\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_trivial\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,\ \textcolor{keyword}{typename}\ Base>}
\DoxyCodeLine{00495\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ call\ =\ Base::template\ callBig<Fun>;}
\DoxyCodeLine{00496\ }
\DoxyCodeLine{00497\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_align\_large(\textcolor{keywordtype}{size\_t}\ align)\ \{}
\DoxyCodeLine{00498\ \ \ \ \ \textcolor{keywordflow}{return}\ align\ >\ \_\_STDCPP\_DEFAULT\_NEW\_ALIGNMENT\_\_;}
\DoxyCodeLine{00499\ \ \ \}}
\DoxyCodeLine{00500\ }
\DoxyCodeLine{00501\ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ IsAlignLarge>}
\DoxyCodeLine{00502\ \ \ \textcolor{keyword}{static}\ std::size\_t\ exec\_(Op\ o,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}*\ src,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}*\ dst)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00503\ \ \ \ \ \textcolor{keywordflow}{switch}\ (o)\ \{}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kMove:}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ dst-\/>bigt\ =\ src-\/>bigt;}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ src-\/>bigt\ =\ \{\};}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kNuke:}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ IsAlignLarge\ ?\ \textcolor{keyword}{operator}\ \textcolor{keyword}{delete}(src-\/>big,\ src-\/>bigt.size,}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::align\_val\_t(src-\/>bigt.align))}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{keyword}{operator}\ \textcolor{keyword}{delete}(src-\/>big,\ src-\/>bigt.size);}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kHeap:}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00515\ \ \ \ \ \}}
\DoxyCodeLine{00516\ \ \ \ \ \textcolor{keywordflow}{return}\ src-\/>bigt.size;}
\DoxyCodeLine{00517\ \ \ \}}
\DoxyCodeLine{00518\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00519\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ exec\ =\ exec\_<is\_align\_large(\textcolor{keyword}{alignof}(T))>;}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \ \ KIWI\_ALWAYS\_INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ ctor(\mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}\&\ data,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}*\ fun,}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ size,}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ align)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00524\ \ \ \ \ \textcolor{comment}{//\ cannot\ use\ type-\/specific\ new\ since\ type-\/specific\ new\ is\ overrideable}}
\DoxyCodeLine{00525\ \ \ \ \ \textcolor{comment}{//\ in\ concert\ with\ type-\/specific\ delete}}
\DoxyCodeLine{00526\ \ \ \ \ data.bigt.big\ =\ is\_align\_large(align)}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ \textcolor{keyword}{operator}\ \textcolor{keyword}{new}(size,\ std::align\_val\_t(align))}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{keyword}{operator}\ \textcolor{keyword}{new}(size);}
\DoxyCodeLine{00529\ \ \ \ \ data.bigt.size\ =\ size;}
\DoxyCodeLine{00530\ \ \ \ \ data.bigt.align\ =\ align;}
\DoxyCodeLine{00531\ \ \ \ \ std::memcpy(data.bigt.big,\ fun,\ size);}
\DoxyCodeLine{00532\ \ \ \}}
\DoxyCodeLine{00533\ \};}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch_small}{DispatchSmall}}\ \{}
\DoxyCodeLine{00536\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_in\_situ\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00537\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_trivial\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00538\ }
\DoxyCodeLine{00539\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun>}
\DoxyCodeLine{00540\ \ \ \textcolor{keyword}{static}\ std::size\_t\ exec(Op\ o,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}*\ src,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}*\ dst)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00541\ \ \ \ \ \textcolor{keywordflow}{switch}\ (o)\ \{}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kMove:}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ ::new\ (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\&dst-\/>tiny))\ Fun(\textcolor{keyword}{static\_cast<}Fun\&\&\textcolor{keyword}{>}(}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ *\textcolor{keyword}{static\_cast<}Fun*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\&src-\/>tiny))));}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ [[fallthrough]];}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kNuke:}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}Fun*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\&src-\/>tiny))-\/>\string~Fun();}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kHeap:}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00551\ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \ \ \textcolor{keywordflow}{return}\ 0U;}
\DoxyCodeLine{00553\ \ \ \}}
\DoxyCodeLine{00554\ \};}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch_big}{DispatchBig}}\ \{}
\DoxyCodeLine{00557\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_in\_situ\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00558\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ is\_trivial\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun>}
\DoxyCodeLine{00561\ \ \ \textcolor{keyword}{static}\ std::size\_t\ exec(Op\ o,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}*\ src,\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}*\ dst)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{keywordflow}{switch}\ (o)\ \{}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kMove:}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ dst-\/>big\ =\ src-\/>big;}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ src-\/>big\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kNuke:}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \textcolor{keyword}{static\_cast<}Fun*\textcolor{keyword}{>}(src-\/>big);}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Op::kHeap:}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00572\ \ \ \ \ \}}
\DoxyCodeLine{00573\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{sizeof}(Fun);}
\DoxyCodeLine{00574\ \ \ \}}
\DoxyCodeLine{00575\ \};}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ InSitu,\ \textcolor{keywordtype}{bool}\ IsTriv>}
\DoxyCodeLine{00578\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch}{Dispatch}};}
\DoxyCodeLine{00579\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00580\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch}{Dispatch}}<true,\ true>\ :\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch_small_trivial}{DispatchSmallTrivial}}\ \{\};}
\DoxyCodeLine{00581\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00582\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch}{Dispatch}}<true,\ false>\ :\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch_small}{DispatchSmall}}\ \{\};}
\DoxyCodeLine{00583\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00584\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch}{Dispatch}}<false,\ true>\ :\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch_big_trivial}{DispatchBigTrivial}}\ \{\};}
\DoxyCodeLine{00585\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00586\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch}{Dispatch}}<false,\ false>\ :\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch_big}{DispatchBig}}\ \{\};}
\DoxyCodeLine{00587\ }
\DoxyCodeLine{00588\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,\ \textcolor{keywordtype}{bool}\ InSituSize\ =\ \textcolor{keyword}{sizeof}(Fun)\ <=\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}),}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ InSituAlign\ =\ \textcolor{keyword}{alignof}(Fun)\ <=\ \textcolor{keyword}{alignof}(\mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{Data}}),}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ InSituNoexcept\ =\ \textcolor{keyword}{noexcept}(Fun(KIWI\_DECLVAL(Fun)))>}
\DoxyCodeLine{00591\ \textcolor{keyword}{using}\ DispatchOf\ =\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_dispatch}{Dispatch}}<InSituSize\ \&\&\ InSituAlign\ \&\&\ InSituNoexcept,}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::is\_trivially\_copyable\_v<Fun>>;}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \}\ \ \textcolor{comment}{//\ namespace\ function}}
\DoxyCodeLine{00595\ \}\ \ \textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FunctionType>}
\DoxyCodeLine{00598\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}\ final\ :\ \textcolor{keyword}{private}\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_function_traits}{detail::function::FunctionTraits<FunctionType>}}\ \{}
\DoxyCodeLine{00599\ \ \ \textcolor{comment}{//\ These\ utility\ types\ are\ defined\ outside\ of\ the\ template\ to\ reduce}}
\DoxyCodeLine{00600\ \ \ \textcolor{comment}{//\ the\ number\ of\ instantiations,\ and\ then\ imported\ in\ the\ class}}
\DoxyCodeLine{00601\ \ \ \textcolor{comment}{//\ namespace\ for\ convenience.}}
\DoxyCodeLine{00602\ \ \ \textcolor{keyword}{using\ }Data\ =\ \mbox{\hyperlink{unionkiwi_1_1detail_1_1function_1_1_data}{detail::function::Data}};}
\DoxyCodeLine{00603\ \ \ \textcolor{keyword}{using\ }Op\ =\ detail::function::Op;}
\DoxyCodeLine{00604\ \ \ \textcolor{keyword}{using\ }CoerceTag\ =\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_coerce_tag}{detail::function::CoerceTag}};}
\DoxyCodeLine{00605\ }
\DoxyCodeLine{00606\ \ \ \textcolor{keyword}{using\ }Traits\ =\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_function_traits}{detail::function::FunctionTraits<FunctionType>}};}
\DoxyCodeLine{00607\ \ \ \textcolor{keyword}{using\ }Call\ =\ \textcolor{keyword}{typename}\ Traits::Call;}
\DoxyCodeLine{00608\ \ \ \textcolor{keyword}{using\ }Exec\ =\ std::size\_t\ (*)(Op,\ Data*,\ Data*)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \ \ \textcolor{keyword}{friend}\ Traits;}
\DoxyCodeLine{00611\ \ \ \textcolor{keyword}{friend}\ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function<typename\ Traits::ConstSignature>}}\ \mbox{\hyperlink{namespacekiwi_a60a5cfa5df6cc93c3804817084f57052}{kiwi::const\_cast\_function<>}}(}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function<typename\ Traits::NonConstSignature>}}\&\&)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00613\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function<typename\ Traits::OtherSignature>}};}
\DoxyCodeLine{00614\ }
\DoxyCodeLine{00615\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00619\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00620\ }
\DoxyCodeLine{00621\ \ \ \textcolor{comment}{//\ not\ copyable}}
\DoxyCodeLine{00622\ \ \ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00623\ }
\DoxyCodeLine{00624\ \textcolor{preprocessor}{\#ifdef\ \_\_OBJC\_\_}}
\DoxyCodeLine{00625\ \ \ \textcolor{comment}{//\ Make\ sure\ Objective\ C\ blocks\ are\ copied}}
\DoxyCodeLine{00626\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }ReturnType,\ \textcolor{keyword}{class}...\ Args>}
\DoxyCodeLine{00627\ \ \ \textcolor{comment}{/*implicit*/}\ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}(ReturnType\ (\string^objCBlock)(Args...\ args))}
\DoxyCodeLine{00628\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}([blockCopy\ =\ (ReturnType(\string^)(Args...))[objCBlock\ \mbox{\hyperlink{namespacekiwi_af0d9ea63159f8a9f92646fcae1bf3956}{copy}}]](}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Args...\ args)\ \{\ \textcolor{keywordflow}{return}\ blockCopy(args...);\ \})\{\};}
\DoxyCodeLine{00630\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00631\ }
\DoxyCodeLine{00635\ \ \ \mbox{\hyperlink{classkiwi_1_1_function_ab9657f6601911996250253e22ade291d}{Function}}(\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}\&\&\ that)\ noexcept\ :\ call\_(that.call\_),\ exec\_(that.exec\_)\ \{}
\DoxyCodeLine{00636\ \ \ \ \ \textcolor{comment}{//\ that\ must\ be\ uninitialized\ before\ exec()\ call\ in\ the\ case\ of\ self\ move}}
\DoxyCodeLine{00637\ \ \ \ \ that.call\_\ =\ \&Traits::uninitCall;}
\DoxyCodeLine{00638\ \ \ \ \ that.exec\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00639\ \ \ \ \ exec(Op::kMove,\ \&that.data\_,\ \&data\_);}
\DoxyCodeLine{00640\ \ \ \}}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00645\ \ \ \textcolor{comment}{/*\ implicit\ */}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classkiwi_1_1_function_af41c1c18f7c605820aa3141b96cfe884}{Function}}(std::nullptr\_t)\ \textcolor{keyword}{noexcept}\ \{\}}
\DoxyCodeLine{00646\ }
\DoxyCodeLine{00669\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ =\ std::enable\_if\_t<}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !detail::is\_similar\_instantiation\_v<Function,\ Fun>>,}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ =\ \textcolor{keyword}{typename}\ Traits::template\ IfSafeResult<Fun>>}
\DoxyCodeLine{00673\ \ \ \textcolor{comment}{/*\ implicit\ */}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classkiwi_1_1_function_a20d58a56d4085ef465c23dbf63fcd3c8}{Function}}(Fun\ fun)\ \textcolor{keyword}{noexcept}(}
\DoxyCodeLine{00674\ \ \ \ \ \ \ detail::function::DispatchOf<Fun>::is\_in\_situ)\ \{}
\DoxyCodeLine{00675\ \ \ \ \ \textcolor{keyword}{using\ }Dispatch\ =\ detail::function::DispatchOf<Fun>;}
\DoxyCodeLine{00676\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (detail::function::IsNullptrCompatible<Fun>)\ \{}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (detail::function::isEmptyFunction(fun))\ \{}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00680\ \ \ \ \ \}}
\DoxyCodeLine{00681\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Dispatch::is\_in\_situ)\ \{}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (!std::is\_empty<Fun>::value\ ||}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !std::is\_trivially\_copyable\_v<Fun>)\ \{}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ ::new\ (\&data\_.tiny)\ Fun(\textcolor{keyword}{static\_cast<}Fun\&\&\textcolor{keyword}{>}(fun));}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00686\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Dispatch::is\_trivial)\ \{}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ Dispatch::ctor(data\_,\ \&fun,\ \textcolor{keyword}{sizeof}(Fun),\ \textcolor{keyword}{alignof}(Fun));}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ data\_.big\ =\ \textcolor{keyword}{new}\ Fun(\textcolor{keyword}{static\_cast<}Fun\&\&\textcolor{keyword}{>}(fun));}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00692\ \ \ \ \ \}}
\DoxyCodeLine{00693\ \ \ \ \ call\_\ =\ Traits::template\ call<Fun,\ Dispatch::is\_in\_situ>;}
\DoxyCodeLine{00694\ \ \ \ \ exec\_\ =\ Exec(Dispatch::template\ exec<Fun>);}
\DoxyCodeLine{00695\ \ \ \}}
\DoxyCodeLine{00696\ }
\DoxyCodeLine{00707\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Signature,\ \textcolor{keyword}{typename}\ Fun\ =\ Function<Signature>,}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ prevent\ gcc\ from\ making\ this\ a\ better\ match\ than\ move-\/ctor}}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ =\ std::enable\_if\_t<!std::is\_same<Function,\ Fun>::value>,}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ =\ \textcolor{keyword}{typename}\ Traits::\textcolor{keyword}{template}\ IfSafeResult<Fun>>}
\DoxyCodeLine{00711\ \ \ \mbox{\hyperlink{classkiwi_1_1_function_ada5c9795b8e7300df73e9fd529283d48}{Function}}(\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function<Signature>}}\&\&\ that)\ \textcolor{keyword}{noexcept}(}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \textcolor{keyword}{noexcept}(\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}(std::move(that),\ CoerceTag\{\})))}
\DoxyCodeLine{00713\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}(std::move(that),\ CoerceTag\{\})\ \{\}}
\DoxyCodeLine{00714\ }
\DoxyCodeLine{00719\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Member,\ \textcolor{keyword}{typename}\ Class,}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Prevent\ this\ overload\ from\ being\ selected\ when\ \`{}ptr`\ is\ not\ a}}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ compatible\ member\ function\ pointer.}}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ =\ \textcolor{keyword}{decltype}(\mbox{\hyperlink{classkiwi_1_1_function}{Function}}(std::mem\_fn((Member\ Class::*)0)))>}
\DoxyCodeLine{00723\ \ \ \textcolor{comment}{/*\ implicit\ */}\ \mbox{\hyperlink{classkiwi_1_1_function_a2f208091ca28fcca6cf6aeb470ee598d}{Function}}(Member\ Class::*\ ptr)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00724\ \ \ \ \ \textcolor{keywordflow}{if}\ (ptr)\ \{}
\DoxyCodeLine{00725\ \ \ \ \ \ \ *\textcolor{keyword}{this}\ =\ std::mem\_fn(ptr);}
\DoxyCodeLine{00726\ \ \ \ \ \}}
\DoxyCodeLine{00727\ \ \ \}}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \ \ \mbox{\hyperlink{classkiwi_1_1_function}{\string~Function}}()\ \{\ exec(Op::kNuke,\ \&data\_,\ \textcolor{keyword}{nullptr});\ \}}
\DoxyCodeLine{00730\ }
\DoxyCodeLine{00731\ \ \ \mbox{\hyperlink{classfolly_1_1_function}{Function}}\&\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classfolly_1_1_function}{Function}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ \textcolor{preprocessor}{\#ifdef\ \_\_OBJC\_\_}}
\DoxyCodeLine{00734\ \ \ \textcolor{comment}{//\ Make\ sure\ Objective\ C\ blocks\ are\ copied}}
\DoxyCodeLine{00735\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class\ }ReturnType,\ \textcolor{keyword}{class}...\ Args>}
\DoxyCodeLine{00736\ \ \ \textcolor{comment}{/*\ implicit\ */}\ \mbox{\hyperlink{classfolly_1_1_function}{Function}}\&\ operator=(ReturnType\ (\string^objCBlock)(Args...\ args))\ \{}
\DoxyCodeLine{00737\ \ \ \ \ (*this)\ =\ [blockCopy\ =\ (ReturnType(\string^)(Args...))[objCBlock\ \mbox{\hyperlink{namespacekiwi_af0d9ea63159f8a9f92646fcae1bf3956}{copy}}]](}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Args...\ args)\ \{\ \textcolor{keywordflow}{return}\ blockCopy(args...);\ \};}
\DoxyCodeLine{00739\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00740\ \ \ \}}
\DoxyCodeLine{00741\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00742\ }
\DoxyCodeLine{00749\ \ \ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}\&\ \mbox{\hyperlink{classkiwi_1_1_function_a3ed1986e2ac79471b862bee0dcea0225}{operator=}}(\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}\&\&\ that)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00750\ \ \ \ \ exec(Op::kNuke,\ \&data\_,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00751\ \ \ \ \ \textcolor{keywordflow}{if}\ (KIWI\_LIKELY(\textcolor{keyword}{this}\ !=\ \&that))\ \{}
\DoxyCodeLine{00752\ \ \ \ \ \ \ that.exec(Op::kMove,\ \&that.data\_,\ \&data\_);}
\DoxyCodeLine{00753\ \ \ \ \ \ \ exec\_\ =\ that.exec\_;}
\DoxyCodeLine{00754\ \ \ \ \ \ \ call\_\ =\ that.call\_;}
\DoxyCodeLine{00755\ \ \ \ \ \}}
\DoxyCodeLine{00756\ \ \ \ \ that.exec\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00757\ \ \ \ \ that.call\_\ =\ \&Traits::uninitCall;}
\DoxyCodeLine{00758\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00759\ \ \ \}}
\DoxyCodeLine{00760\ }
\DoxyCodeLine{00769\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,\ \textcolor{keyword}{typename}...,}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Nx\ =\ \textcolor{keyword}{noexcept}(\mbox{\hyperlink{classkiwi_1_1_function}{Function}}(KIWI\_DECLVAL(Fun\&\&)))>}
\DoxyCodeLine{00771\ \ \ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}\&\ \textcolor{keyword}{operator}=(Fun\ fun)\ \textcolor{keyword}{noexcept}(Nx)\ \{}
\DoxyCodeLine{00772\ \ \ \ \ \textcolor{comment}{//\ Doing\ this\ in\ place\ is\ more\ efficient\ when\ we\ can\ do\ so\ safely.}}
\DoxyCodeLine{00773\ \ \ \ \ \textcolor{keywordflow}{if}\ (Nx)\ \{}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \textcolor{comment}{//\ Q:\ Why\ is\ is\ safe\ to\ destroy\ and\ reconstruct\ this\ object\ in\ place?}}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \textcolor{comment}{//\ A:\ See\ the\ explanation\ in\ the\ move\ assignment\ operator.}}
\DoxyCodeLine{00776\ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{\string~Function}}();}
\DoxyCodeLine{00777\ \ \ \ \ \ \ ::new\ (\textcolor{keyword}{this})\ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}(\textcolor{keyword}{static\_cast<}Fun\&\&\textcolor{keyword}{>}(fun));}
\DoxyCodeLine{00778\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \textcolor{comment}{//\ Construct\ a\ temporary\ and\ (nothrow)\ swap.}}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}(\textcolor{keyword}{static\_cast<}Fun\&\&\textcolor{keyword}{>}(fun)).swap(*\textcolor{keyword}{this});}
\DoxyCodeLine{00781\ \ \ \ \ \}}
\DoxyCodeLine{00782\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00783\ \ \ \}}
\DoxyCodeLine{00784\ }
\DoxyCodeLine{00788\ \ \ \textcolor{keyword}{template}\ <}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Signature,\ \textcolor{keyword}{typename}...,}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ =\ \textcolor{keyword}{typename}\ Traits::template\ IfSafeResult<Function<Signature>>>}
\DoxyCodeLine{00791\ \ \ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}\&\ \mbox{\hyperlink{classkiwi_1_1_function_a88c8bcdb02871b681d6b5dc47ea65b0f}{operator=}}(\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function<Signature>}}\&\&\ that)\ \textcolor{keyword}{noexcept}(}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \textcolor{keyword}{noexcept}(\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}(std::move(that))))\ \{}
\DoxyCodeLine{00793\ \ \ \ \ \textcolor{keywordflow}{return}\ (*\textcolor{keyword}{this}\ =\ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}(std::move(that)));}
\DoxyCodeLine{00794\ \ \ \}}
\DoxyCodeLine{00795\ }
\DoxyCodeLine{00799\ \ \ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}\&\ \mbox{\hyperlink{classkiwi_1_1_function_a9cb7f678ef4c3392e4414d8665ee9ac7}{operator=}}(std::nullptr\_t)\ \textcolor{keyword}{noexcept}\ \{\ \textcolor{keywordflow}{return}\ (*\textcolor{keyword}{this}\ =\ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}());\ \}}
\DoxyCodeLine{00800\ }
\DoxyCodeLine{00805\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Member,\ \textcolor{keyword}{typename}\ Class>}
\DoxyCodeLine{00806\ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classkiwi_1_1_function_a6a53a249f312673fa5b0f52e907540fc}{operator=}}(Member\ Class::*\ ptr)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \textcolor{comment}{//\ Prevent\ this\ overload\ from\ being\ selected\ when\ \`{}ptr`\ is\ not\ a}}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \textcolor{comment}{//\ compatible\ member\ function\ pointer.}}
\DoxyCodeLine{00809\ \ \ \ \ \ \ -\/>\ \textcolor{keyword}{decltype}(operator=(std::mem\_fn(ptr)))\ \{}
\DoxyCodeLine{00810\ \ \ \ \ \textcolor{keywordflow}{return}\ ptr\ ?\ (*\textcolor{keyword}{this}\ =\ std::mem\_fn(ptr))\ :\ (*\textcolor{keyword}{this}\ =\ \mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}());}
\DoxyCodeLine{00811\ \ \ \}}
\DoxyCodeLine{00812\ }
\DoxyCodeLine{00816\ \ \ \textcolor{keyword}{using\ }Traits::operator();}
\DoxyCodeLine{00817\ }
\DoxyCodeLine{00823\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classkiwi_1_1_function_ae97d666e3b988b198076f153211f0177}{swap}}(\mbox{\hyperlink{classkiwi_1_1_function_ada9f1820dd08eaae6ba5fa9f7f5de09e}{Function}}\&\ that)\ \textcolor{keyword}{noexcept}\ \{\ std::swap(*\textcolor{keyword}{this},\ that);\ \}}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00829\ \ \ \textcolor{keyword}{explicit}\ \textcolor{keyword}{operator}\ bool()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ exec\_\ !=\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00830\ }
\DoxyCodeLine{00836\ \ \ std::size\_t\ \mbox{\hyperlink{classkiwi_1_1_function_ad9df3f77f7cc84fb3cbd4ca433453b72}{heapAllocatedMemory}}()\ const\ noexcept\ \{}
\DoxyCodeLine{00837\ \ \ \ \ \textcolor{keywordflow}{return}\ exec(Op::kHeap,\ \&data\_,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00838\ \ \ \}}
\DoxyCodeLine{00839\ }
\DoxyCodeLine{00840\ \ \ \textcolor{keyword}{using\ }typename\ Traits::SharedProxy;}
\DoxyCodeLine{00841\ }
\DoxyCodeLine{00846\ \ \ SharedProxy\ \mbox{\hyperlink{classkiwi_1_1_function_aa38361ed9f93441cca372c24759def28}{asSharedProxy}}()\ \&\&\ \{\ \textcolor{keywordflow}{return}\ SharedProxy\{std::move(*\textcolor{keyword}{this})\};\ \}}
\DoxyCodeLine{00847\ }
\DoxyCodeLine{00853\ \ \ std::function<typename\ Traits::NonConstSignature>\ \mbox{\hyperlink{classkiwi_1_1_function_a33a82344bd4a4aec0243ba1974b8a79a}{asStdFunction}}()\ \&\&\ \{}
\DoxyCodeLine{00854\ \ \ \ \ \textcolor{keywordflow}{return}\ std::move(*this).asSharedProxy();}
\DoxyCodeLine{00855\ \ \ \}}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00858\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Signature>}
\DoxyCodeLine{00859\ \ \ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}(\mbox{\hyperlink{classkiwi_1_1_function}{Function<Signature>}}\&\&\ fun,\ CoerceTag)\ \{}
\DoxyCodeLine{00860\ \ \ \ \ \textcolor{keyword}{using\ }Fun\ =\ \mbox{\hyperlink{classkiwi_1_1_function}{Function<Signature>}};}
\DoxyCodeLine{00861\ \ \ \ \ \textcolor{keywordflow}{if}\ (fun)\ \{}
\DoxyCodeLine{00862\ \ \ \ \ \ \ data\_.big\ =\ \textcolor{keyword}{new}\ Fun(\textcolor{keyword}{static\_cast<}Fun\&\&\textcolor{keyword}{>}(fun));}
\DoxyCodeLine{00863\ \ \ \ \ \ \ call\_\ =\ Traits::template\ call<Fun,\ false>;}
\DoxyCodeLine{00864\ \ \ \ \ \ \ exec\_\ =\ Exec(detail::function::DispatchBig::exec<Fun>);}
\DoxyCodeLine{00865\ \ \ \ \ \}}
\DoxyCodeLine{00866\ \ \ \}}
\DoxyCodeLine{00867\ }
\DoxyCodeLine{00868\ \ \ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}(\mbox{\hyperlink{classkiwi_1_1_function}{Function<typename\ Traits::OtherSignature>}}\&\&\ that,\ CoerceTag)\ noexcept}
\DoxyCodeLine{00869\ \ \ \ \ \ \ :\ call\_(that.call\_),\ exec\_(that.exec\_)\ \{}
\DoxyCodeLine{00870\ \ \ \ \ that.call\_\ =\ \&Traits::uninitCall;}
\DoxyCodeLine{00871\ \ \ \ \ that.exec\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00872\ \ \ \ \ exec(Op::kMove,\ \&that.data\_,\ \&data\_);}
\DoxyCodeLine{00873\ \ \ \}}
\DoxyCodeLine{00874\ }
\DoxyCodeLine{00875\ \ \ std::size\_t\ exec(Op\ o,\ Data*\ src,\ Data*\ dst)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00876\ \ \ \ \ \textcolor{keywordflow}{if}\ (!exec\_)\ \{}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0U;}
\DoxyCodeLine{00878\ \ \ \ \ \}}
\DoxyCodeLine{00879\ }
\DoxyCodeLine{00880\ \ \ \ \ \textcolor{keywordflow}{return}\ exec\_(o,\ src,\ dst);}
\DoxyCodeLine{00881\ \ \ \}}
\DoxyCodeLine{00882\ }
\DoxyCodeLine{00883\ \ \ \textcolor{comment}{//\ The\ \`{}data\_`\ member\ is\ mutable\ to\ allow\ \`{}const\_cast\_function`\ to\ work}}
\DoxyCodeLine{00884\ \ \ \textcolor{comment}{//\ without\ invoking\ undefined\ behavior.\ Const-\/correctness\ is\ only\ violated}}
\DoxyCodeLine{00885\ \ \ \textcolor{comment}{//\ when\ \`{}FunctionType`\ is\ a\ const\ function\ type\ (e.g.,\ \`{}int()\ const`)\ and}}
\DoxyCodeLine{00886\ \ \ \textcolor{comment}{//\ \`{}*this`\ is\ the\ result\ of\ calling\ \`{}const\_cast\_function`.}}
\DoxyCodeLine{00887\ \ \ \textcolor{keyword}{mutable}\ Data\ data\_\{unsafe\_default\_initialized\};}
\DoxyCodeLine{00888\ \ \ Call\ call\_\{\&Traits::uninitCall\};}
\DoxyCodeLine{00889\ \ \ Exec\ exec\_\{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00890\ \};}
\DoxyCodeLine{00891\ }
\DoxyCodeLine{00892\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FunctionType>}
\DoxyCodeLine{00893\ \textcolor{keywordtype}{void}\ swap(\mbox{\hyperlink{classkiwi_1_1_function}{Function<FunctionType>}}\&\ lhs,\ \mbox{\hyperlink{classkiwi_1_1_function}{Function<FunctionType>}}\&\ rhs)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00894\ \ \ lhs.swap(rhs);}
\DoxyCodeLine{00895\ \}}
\DoxyCodeLine{00896\ }
\DoxyCodeLine{00897\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FunctionType>}
\DoxyCodeLine{00898\ \textcolor{keywordtype}{bool}\ operator==(\textcolor{keyword}{const}\ \mbox{\hyperlink{classkiwi_1_1_function}{Function<FunctionType>}}\&\ fn,\ std::nullptr\_t)\ \{}
\DoxyCodeLine{00899\ \ \ \textcolor{keywordflow}{return}\ !fn;}
\DoxyCodeLine{00900\ \}}
\DoxyCodeLine{00901\ }
\DoxyCodeLine{00902\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FunctionType>}
\DoxyCodeLine{00903\ \textcolor{keywordtype}{bool}\ operator==(std::nullptr\_t,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classkiwi_1_1_function}{Function<FunctionType>}}\&\ fn)\ \{}
\DoxyCodeLine{00904\ \ \ \textcolor{keywordflow}{return}\ !fn;}
\DoxyCodeLine{00905\ \}}
\DoxyCodeLine{00906\ }
\DoxyCodeLine{00907\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FunctionType>}
\DoxyCodeLine{00908\ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classkiwi_1_1_function}{Function<FunctionType>}}\&\ fn,\ std::nullptr\_t)\ \{}
\DoxyCodeLine{00909\ \ \ \textcolor{keywordflow}{return}\ !(fn\ ==\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00910\ \}}
\DoxyCodeLine{00911\ }
\DoxyCodeLine{00912\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FunctionType>}
\DoxyCodeLine{00913\ \textcolor{keywordtype}{bool}\ operator!=(std::nullptr\_t,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classkiwi_1_1_function}{Function<FunctionType>}}\&\ fn)\ \{}
\DoxyCodeLine{00914\ \ \ \textcolor{keywordflow}{return}\ !(\textcolor{keyword}{nullptr}\ ==\ fn);}
\DoxyCodeLine{00915\ \}}
\DoxyCodeLine{00916\ }
\DoxyCodeLine{00940\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00941\ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}<ReturnType(Args...)\ const>\ \mbox{\hyperlink{namespacekiwi_a60a5cfa5df6cc93c3804817084f57052}{const\_cast\_function}}(}
\DoxyCodeLine{00942\ \ \ \ \ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}<ReturnType(Args...)>\&\&\ that)\ noexcept\ \{}
\DoxyCodeLine{00943\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}<ReturnType(Args...)\ \textcolor{keyword}{const}>\{std::move(that),}
\DoxyCodeLine{00944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_coerce_tag}{detail::function::CoerceTag}}\{\}\};}
\DoxyCodeLine{00945\ \}}
\DoxyCodeLine{00946\ }
\DoxyCodeLine{00947\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00948\ \mbox{\hyperlink{classfolly_1_1_function}{Function}}<ReturnType(Args...)\ const>\ \mbox{\hyperlink{namespacekiwi_a60a5cfa5df6cc93c3804817084f57052}{const\_cast\_function}}(}
\DoxyCodeLine{00949\ \ \ \ \ \mbox{\hyperlink{classfolly_1_1_function}{Function}}<ReturnType(Args...)\ const>\&\&\ that)\ noexcept\ \{}
\DoxyCodeLine{00950\ \ \ \textcolor{keywordflow}{return}\ std::move(that);}
\DoxyCodeLine{00951\ \}}
\DoxyCodeLine{00952\ }
\DoxyCodeLine{00953\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00954\ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}<ReturnType(Args...)\ const\ noexcept>\ \mbox{\hyperlink{namespacekiwi_a60a5cfa5df6cc93c3804817084f57052}{const\_cast\_function}}(}
\DoxyCodeLine{00955\ \ \ \ \ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}<ReturnType(Args...)\ noexcept>\&\&\ that)\ noexcept\ \{}
\DoxyCodeLine{00956\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}<ReturnType(Args...)\ const\ noexcept>\{}
\DoxyCodeLine{00957\ \ \ \ \ \ \ std::move(that),\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function_1_1_coerce_tag}{detail::function::CoerceTag}}\{\}\};}
\DoxyCodeLine{00958\ \}}
\DoxyCodeLine{00959\ }
\DoxyCodeLine{00960\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00961\ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}<ReturnType(Args...)\ const\ noexcept>\ \mbox{\hyperlink{namespacekiwi_a60a5cfa5df6cc93c3804817084f57052}{const\_cast\_function}}(}
\DoxyCodeLine{00962\ \ \ \ \ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}<ReturnType(Args...)\ const\ noexcept>\&\&\ that)\ noexcept\ \{}
\DoxyCodeLine{00963\ \ \ \textcolor{keywordflow}{return}\ std::move(that);}
\DoxyCodeLine{00964\ \}}
\DoxyCodeLine{00965\ }
\DoxyCodeLine{00966\ \textcolor{keyword}{namespace\ }detail\ \{}
\DoxyCodeLine{00967\ }
\DoxyCodeLine{00968\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Vo\textcolor{keywordtype}{id},\ \textcolor{keyword}{typename}>}
\DoxyCodeLine{00969\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function__ctor__deduce__}{function\_ctor\_deduce\_}};}
\DoxyCodeLine{00970\ }
\DoxyCodeLine{00971\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ P>}
\DoxyCodeLine{00972\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function__ctor__deduce__}{function\_ctor\_deduce\_}}<}
\DoxyCodeLine{00973\ \ \ \ \ std::enable\_if\_t<std::is\_function<std::remove\_pointer\_t<P>>::value>,\ P>\ \{}
\DoxyCodeLine{00974\ \ \ \textcolor{keyword}{using\ }type\ =\ std::remove\_pointer\_t<P>;}
\DoxyCodeLine{00975\ \};}
\DoxyCodeLine{00976\ }
\DoxyCodeLine{00977\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00978\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structkiwi_1_1detail_1_1function__ctor__deduce__}{function\_ctor\_deduce\_}}<void\_t<decltype(\&F::operator())>,\ F>\ \{}
\DoxyCodeLine{00979\ \ \ \textcolor{keyword}{using\ }type\ =}
\DoxyCodeLine{00980\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structkiwi_1_1member__pointer__traits}{member\_pointer\_traits}}<\textcolor{keyword}{decltype}(\&F::operator())>::member\_type;}
\DoxyCodeLine{00981\ \};}
\DoxyCodeLine{00982\ }
\DoxyCodeLine{00983\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00984\ \textcolor{keyword}{using\ }function\_ctor\_deduce\_t\ =\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structkiwi_1_1detail_1_1function__ctor__deduce__}{function\_ctor\_deduce\_<void,\ F>::type}};}
\DoxyCodeLine{00985\ }
\DoxyCodeLine{00986\ \}\ \ \textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00987\ }
\DoxyCodeLine{00988\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00989\ \mbox{\hyperlink{classkiwi_1_1_function}{Function}}(F)\ -\/>\ \mbox{\hyperlink{classkiwi_1_1_function}{Function<detail::function\_ctor\_deduce\_t<F>}}>;}
\DoxyCodeLine{00990\ }
\DoxyCodeLine{01010\ }
\DoxyCodeLine{01011\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FunctionType>}
\DoxyCodeLine{01012\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classkiwi_1_1_function_ref}{FunctionRef}};}
\DoxyCodeLine{01013\ }
\DoxyCodeLine{01014\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ReturnType,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{01015\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classkiwi_1_1_function_ref_3_01_return_type_07_args_8_8_8_08_4_ab6cd34d5ba80504b1e87a890bcf28ff5}{FunctionRef}}<ReturnType(Args...)>\ final\ \{}
\DoxyCodeLine{01016\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Arg>}
\DoxyCodeLine{01017\ \ \ \textcolor{keyword}{using\ }CallArg\ =\ detail::function::CallArg<Arg>;}
\DoxyCodeLine{01018\ }
\DoxyCodeLine{01019\ \ \ \textcolor{keyword}{using\ }Call\ =\ ReturnType\ (*)(CallArg<Args>...,\ \textcolor{keywordtype}{void}*);}
\DoxyCodeLine{01020\ }
\DoxyCodeLine{01021\ \ \ \textcolor{keyword}{static}\ ReturnType\ uninitCall(CallArg<Args>...,\ \textcolor{keywordtype}{void}*)\ \{}
\DoxyCodeLine{01022\ \ \ \ \ \mbox{\hyperlink{namespacekiwi_abe3cc88b10ffe4cc4b1796c4bf782900}{throw\_exception<std::bad\_function\_call>}}();}
\DoxyCodeLine{01023\ \ \ \}}
\DoxyCodeLine{01024\ }
\DoxyCodeLine{01025\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,}
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ \ \ \ \ std::enable\_if\_t<!std::is\_pointer<Fun>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{01027\ \ \ \textcolor{keyword}{static}\ ReturnType\ call(CallArg<Args>...\ args,\ \textcolor{keywordtype}{void}*\ \textcolor{keywordtype}{object})\ \{}
\DoxyCodeLine{01028\ \ \ \ \ \textcolor{keyword}{using\ }Pointer\ =\ std::add\_pointer\_t<Fun>;}
\DoxyCodeLine{01029\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}ReturnType\textcolor{keyword}{>}(}
\DoxyCodeLine{01030\ \ \ \ \ \ \ \ \ std::invoke(\textcolor{keyword}{static\_cast<}Fun\&\&\textcolor{keyword}{>}(*\textcolor{keyword}{static\_cast<}Pointer\textcolor{keyword}{>}(\textcolor{keywordtype}{object})),}
\DoxyCodeLine{01031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...));}
\DoxyCodeLine{01032\ \ \ \}}
\DoxyCodeLine{01033\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ \ \ \ \ std::enable\_if\_t<std::is\_pointer<Fun>::value,\ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{01035\ \ \ \textcolor{keyword}{static}\ ReturnType\ call(CallArg<Args>...\ args,\ \textcolor{keywordtype}{void}*\ \textcolor{keywordtype}{object})\ \{}
\DoxyCodeLine{01036\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}ReturnType\textcolor{keyword}{>}(std::invoke(\textcolor{keyword}{reinterpret\_cast<}Fun\textcolor{keyword}{>}(\textcolor{keywordtype}{object}),}
\DoxyCodeLine{01037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...));}
\DoxyCodeLine{01038\ \ \ \}}
\DoxyCodeLine{01039\ }
\DoxyCodeLine{01040\ \ \ \textcolor{keywordtype}{void}*\ object\_\{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{01041\ \ \ Call\ call\_\{\&FunctionRef::uninitCall\};}
\DoxyCodeLine{01042\ }
\DoxyCodeLine{01043\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01049\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classkiwi_1_1_function_ref_3_01_return_type_07_args_8_8_8_08_4_ab6cd34d5ba80504b1e87a890bcf28ff5}{FunctionRef}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{01050\ }
\DoxyCodeLine{01056\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classkiwi_1_1_function_ref_3_01_return_type_07_args_8_8_8_08_4_a02776cb3bce68f642ec7303c7e1e11c4}{FunctionRef}}(std::nullptr\_t)\ \textcolor{keyword}{noexcept}\ \{\}}
\DoxyCodeLine{01057\ }
\DoxyCodeLine{01063\ \ \ \textcolor{keyword}{template}\ <}
\DoxyCodeLine{01064\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Fun,}
\DoxyCodeLine{01065\ \ \ \ \ \ \ std::enable\_if\_t<}
\DoxyCodeLine{01066\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structkiwi_1_1_conjunction}{Conjunction<Negation<std::is\_same<FunctionRef,\ std::decay\_t<Fun>}}>>,}
\DoxyCodeLine{01067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::is\_invocable\_r<ReturnType,\ Fun\&\&,\ Args\&\&...>>::value,}
\DoxyCodeLine{01068\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{01069\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{comment}{/*\ implicit\ */}\ \mbox{\hyperlink{classkiwi_1_1_function_ref_3_01_return_type_07_args_8_8_8_08_4_a8c57b2ed926872bed15ee7400cbbe7fe}{FunctionRef}}(Fun\&\&\ fun)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01070\ \ \ \ \ \textcolor{comment}{//\ \`{}Fun`\ may\ be\ a\ const\ type,\ in\ which\ case\ we\ have\ to\ do\ a\ const\_cast}}
\DoxyCodeLine{01071\ \ \ \ \ \textcolor{comment}{//\ to\ store\ the\ address\ in\ a\ \`{}void*`.\ This\ is\ safe\ because\ the\ \`{}void*`}}
\DoxyCodeLine{01072\ \ \ \ \ \textcolor{comment}{//\ will\ be\ cast\ back\ to\ \`{}Fun*`\ (which\ is\ a\ const\ pointer\ whenever\ \`{}Fun`}}
\DoxyCodeLine{01073\ \ \ \ \ \textcolor{comment}{//\ is\ a\ const\ type)\ inside\ \`{}FunctionRef::call`}}
\DoxyCodeLine{01074\ \ \ \ \ \textcolor{keyword}{auto}\&\ ref\ =\ fun;\ \ \textcolor{comment}{//\ work\ around\ forwarding\ lint\ advice}}
\DoxyCodeLine{01075\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01076\ \ \ \ \ \ \ \ \ detail::function::IsNullptrCompatible<std::decay\_t<Fun>>)\ \{}
\DoxyCodeLine{01077\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (detail::function::isEmptyFunction(fun))\ \{}
\DoxyCodeLine{01078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01079\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01080\ \ \ \ \ \}}
\DoxyCodeLine{01081\ \ \ \ \ \textcolor{keyword}{auto}\ ptr\ =\ std::addressof(ref);}
\DoxyCodeLine{01082\ \ \ \ \ object\_\ =\ \textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}\ const*\textcolor{keyword}{>}(ptr));}
\DoxyCodeLine{01083\ \ \ \ \ call\_\ =\ \&FunctionRef::template\ call<Fun>;}
\DoxyCodeLine{01084\ \ \ \}}
\DoxyCodeLine{01085\ }
\DoxyCodeLine{01090\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fun,}
\DoxyCodeLine{01091\ \ \ \ \ \ \ \ \ \ \ \ \ std::enable\_if\_t<std::is\_function<Fun>::value,\ \textcolor{keywordtype}{int}>\ =\ 0,}
\DoxyCodeLine{01092\ \ \ \ \ \ \ \ \ \ \ \ \ std::enable\_if\_t<std::is\_invocable\_r\_v<ReturnType,\ Fun\&,\ Args\&\&...>,}
\DoxyCodeLine{01093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}>\ =\ 0>}
\DoxyCodeLine{01094\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{comment}{/*\ implicit\ */}\ \mbox{\hyperlink{classkiwi_1_1_function_ref_3_01_return_type_07_args_8_8_8_08_4_a8a4496f2286716f11edad52710dc0861}{FunctionRef}}(Fun*\ fun)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01095\ \ \ \ \ \textcolor{keywordflow}{if}\ (fun)\ \{}
\DoxyCodeLine{01096\ \ \ \ \ \ \ object\_\ =\ \textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}\ const*\textcolor{keyword}{>}(fun));}
\DoxyCodeLine{01097\ \ \ \ \ \ \ call\_\ =\ \&FunctionRef::template\ call<Fun*>;}
\DoxyCodeLine{01098\ \ \ \ \ \}}
\DoxyCodeLine{01099\ \ \ \}}
\DoxyCodeLine{01100\ }
\DoxyCodeLine{01101\ \ \ ReturnType\ operator()(Args...\ args)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{01102\ \ \ \ \ \textcolor{keywordflow}{return}\ call\_(\textcolor{keyword}{static\_cast<}Args\&\&\textcolor{keyword}{>}(args)...,\ object\_);}
\DoxyCodeLine{01103\ \ \ \}}
\DoxyCodeLine{01104\ }
\DoxyCodeLine{01105\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{explicit}\ \textcolor{keyword}{operator}\ bool()\ const\ noexcept\ \{\ \textcolor{keywordflow}{return}\ object\_;\ \}}
\DoxyCodeLine{01106\ }
\DoxyCodeLine{01107\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator==(FunctionRef<ReturnType(Args...)>\ ref,}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::nullptr\_t)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01109\ \ \ \ \ \textcolor{keywordflow}{return}\ ref.object\_\ ==\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01110\ \ \ \}}
\DoxyCodeLine{01111\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(FunctionRef<ReturnType(Args...)>\ ref,}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::nullptr\_t)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01113\ \ \ \ \ \textcolor{keywordflow}{return}\ ref.object\_\ !=\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01114\ \ \ \}}
\DoxyCodeLine{01115\ }
\DoxyCodeLine{01116\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator==(}
\DoxyCodeLine{01117\ \ \ \ \ \ \ std::nullptr\_t,\ FunctionRef<ReturnType(Args...)>\ ref)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01118\ \ \ \ \ \textcolor{keywordflow}{return}\ ref.object\_\ ==\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01119\ \ \ \}}
\DoxyCodeLine{01120\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ operator!=(}
\DoxyCodeLine{01121\ \ \ \ \ \ \ std::nullptr\_t,\ FunctionRef<ReturnType(Args...)>\ ref)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{01122\ \ \ \ \ \textcolor{keywordflow}{return}\ ref.object\_\ !=\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01123\ \ \ \}}
\DoxyCodeLine{01124\ \};}
\DoxyCodeLine{01125\ }
\DoxyCodeLine{01126\ \}\ \ \textcolor{comment}{//\ namespace\ kiwi}}

\end{DoxyCode}
